---
page_title: "nsc_account Resource - nsc"
subcategory: ""
description: |-
  Manages a NATS JWT Account
---

# nsc_account (Resource)

Manages a NATS JWT Account

## Example Usage

### Basic Account
```terraform
# Generate keys
resource "nsc_nkey" "operator" {
  type = "operator"
}

resource "nsc_nkey" "account" {
  type = "account"
}

# Create operator
resource "nsc_operator" "main" {
  name        = "MyOperator"
  subject     = nsc_nkey.operator.public_key
  issuer_seed = nsc_nkey.operator.seed
}

# Basic account with permissions and limits
resource "nsc_account" "app" {
  name        = "AppAccount"
  subject     = nsc_nkey.account.public_key
  issuer_seed = nsc_nkey.operator.seed

  # Default permissions for users in this account
  allow_pub = ["app.>", "_INBOX.>"]
  allow_sub = ["app.>", "_INBOX.>"]

  # Account limits
  max_connections = 1000
  max_payload     = 1048576 # 1MB max message size
}

# Access the account JWT
output "account_jwt" {
  value = nsc_account.app.jwt
}

# Account public key
output "account_public_key" {
  value = nsc_account.app.public_key
}
```

### Account with JetStream Enabled
```terraform
# Generate keys
resource "nsc_nkey" "operator" {
  type = "operator"
}

resource "nsc_nkey" "account" {
  type = "account"
}

# Create operator
resource "nsc_operator" "main" {
  name        = "MyOperator"
  subject     = nsc_nkey.operator.public_key
  issuer_seed = nsc_nkey.operator.seed
}

# Account with JetStream enabled
resource "nsc_account" "jetstream" {
  name        = "JetStreamAccount"
  subject     = nsc_nkey.account.public_key
  issuer_seed = nsc_nkey.operator.seed

  # Basic permissions
  allow_pub = ["app.>", "_INBOX.>"]
  allow_sub = ["app.>", "_INBOX.>"]

  # JetStream limits (setting these enables JetStream for this account)
  max_memory_storage = 1073741824  # 1GB memory storage
  max_disk_storage   = 10737418240 # 10GB disk storage
  max_streams        = 10          # Maximum 10 streams
  max_consumers      = 100         # Maximum 100 consumers

  # Optional: Additional JetStream stream limits
  max_ack_pending         = 1000  # Max unacknowledged messages per consumer
  max_memory_stream_bytes = -1    # Unlimited memory per stream
  max_disk_stream_bytes   = -1    # Unlimited disk per stream
  max_bytes_required      = false # Don't require max_bytes on streams
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

> **NOTE**: [Write-only arguments](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments) are supported in Terraform 1.11 and later.

- `issuer_seed` (String, Sensitive, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) Operator seed for signing the account JWT (issuer). Never stored in state.
- `name` (String) Account name
- `subject` (String) Account public key (subject of the JWT)

### Optional

- `allow_pub` (List of String) Publish permissions
- `allow_pub_response` (Number) Allow publishing to reply subjects
- `allow_sub` (List of String) Subscribe permissions
- `allow_wildcard_exports` (Boolean) Allow wildcards in exports
- `deny_pub` (List of String) Deny publish permissions
- `deny_sub` (List of String) Deny subscribe permissions
- `disallow_bearer_token` (Boolean) Disallow user JWTs to be bearer tokens
- `expires_at` (String) Absolute expiry timestamp (RFC3339). Can be specified directly or computed from expires_in. Mutually exclusive with expires_in.
- `expires_in` (String) Relative expiry duration (e.g., '8760h' for 1 year). Mutually exclusive with expires_at.
- `export` (Block List) Exports this account provides to other accounts (see [below for nested schema](#nestedblock--export))
- `import` (Block List) Imports from other accounts (see [below for nested schema](#nestedblock--import))
- `max_ack_pending` (Number) Maximum ack pending of a stream (-1 for unlimited)
- `max_bytes_required` (Boolean) Require max bytes to be set for all streams
- `max_connections` (Number) Maximum number of active connections (-1 for unlimited)
- `max_consumers` (Number) Maximum number of consumers (-1 for unlimited)
- `max_data` (Number) Maximum number of bytes (-1 for unlimited)
- `max_disk_storage` (Number) Maximum bytes stored on disk across all streams (0 for disabled)
- `max_disk_stream_bytes` (Number) Maximum bytes a disk backed stream can have (0 for unlimited)
- `max_exports` (Number) Maximum number of exports (-1 for unlimited)
- `max_imports` (Number) Maximum number of imports (-1 for unlimited)
- `max_leaf_nodes` (Number) Maximum number of active leaf node connections (-1 for unlimited)
- `max_memory_storage` (Number) Maximum bytes stored in memory across all streams (0 for disabled)
- `max_memory_stream_bytes` (Number) Maximum bytes a memory backed stream can have (0 for unlimited)
- `max_payload` (Number) Maximum message payload in bytes (-1 for unlimited)
- `max_streams` (Number) Maximum number of streams (-1 for unlimited)
- `max_subscriptions` (Number) Maximum number of subscriptions (-1 for unlimited)
- `response_ttl` (String) Time limit for response permissions
- `signing_keys` (List of String) Optional signing key public keys (for signing user JWTs)
- `starts_at` (String) Absolute start timestamp (RFC3339). Can be specified directly or computed from starts_in. Mutually exclusive with starts_in.
- `starts_in` (String) Relative start delay (e.g., '72h' for 3 days). Mutually exclusive with starts_at.

### Read-Only

- `id` (String) Account identifier (public key)
- `jwt` (String) Generated JWT token
- `public_key` (String) Account public key

<a id="nestedblock--export"></a>
### Nested Schema for `export`

Required:

- `subject` (String) Subject pattern to export
- `type` (String) Export type: 'stream' for pub/sub or 'service' for request/reply

Optional:

- `account_token_position` (Number) Position in the subject where the account token appears (for multi-tenant exports)
- `advertise` (Boolean) Advertise this export publicly
- `allow_trace` (Boolean) Allow tracing for this export
- `description` (String) Export description
- `info_url` (String) URL with more information about this export
- `name` (String) Export name
- `response_threshold` (String) Maximum time to wait for service response (e.g., '5s')
- `response_type` (String) Service response type: 'Singleton' (single response), 'Stream' (multiple responses), or 'Chunked' (chunked single response)
- `token_required` (Boolean) Whether importing accounts need an activation token


<a id="nestedblock--import"></a>
### Nested Schema for `import`

Required:

- `account` (String) Public key of the exporting account
- `subject` (String) Subject pattern from the exporting account's perspective
- `type` (String) Import type: 'stream' for pub/sub or 'service' for request/reply

Optional:

- `allow_trace` (Boolean) Allow tracing for this import
- `local_subject` (String) Local subject mapping (can use $1, $2 for wildcard references)
- `name` (String) Import name
- `share` (Boolean) Share imported service across queue subscribers
- `token` (String, Sensitive) Activation token if required by the export
